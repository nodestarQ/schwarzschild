services:
  relay:
    build:
      context: ./relay
      dockerfile: Dockerfile
    container_name: schwarzschild-relay
    ports:
      - "8080:8080"
    environment:
      PORT: 8080
      ETHEREUM_RPC: ${ETHEREUM_RPC:-https://sepolia.infura.io/v3/YOUR_INFURA_KEY}
      CONTRACT_ADDRESS: ${CONTRACT_ADDRESS:-0x}
      PRIVATE_KEY: ${PRIVATE_KEY:-your_private_key_here_without_0x_prefix}
      CONTRACT_ABI: ${CONTRACT_ABI:-[]}
    networks:
      - schwarzschild-network
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        VITE_RELAY_URL: http://relay:8080
    container_name: schwarzschild-frontend
    ports:
      - "3547:3547"
    depends_on:
      - relay
    networks:
      - schwarzschild-network
    restart: unless-stopped

networks:
  schwarzschild-network:
    driver: bridge
